<{ include file="./components/blocks-overview.html" }>

<div class="adminnavi">
	<a href="./index.php"><{$smarty.const._MI_LEGACY_NAME}></a>
	&raquo;&raquo; <span class="adminnaviTitle"><a href="./index.php?action=BlockList"><{$smarty.const._MI_LEGACY_MENU_BLOCKLIST}></a></span>
</div>


<div class="ui-card-main">

<h2 class="admintitle"><{$smarty.const._MI_LEGACY_MENU_BLOCKLIST}></h2>

<div class="tips">
 <{$smarty.const._AD_LEGACY_TIPS_ADD_CUSTOM_BLOCK}> <{$smarty.const._AD_LEGACY_TIPS_BLOCK}>
</div>

<{if $actionForm->hasError()}>
<div class="error">
  <ul>
    <{foreach item=message from=$actionForm->getErrorMessages()}>
      <li><{$message|xoops_escape}></li>
    <{/foreach}>
  </ul>
</div>
<{/if}>

</div><{*  /ui-card-main *}>


<{ include file="./components/blocks-search.html" }>

<section class="filter">
<{$smarty.const._AD_LEGACY_LANG_BID}>
      <a href="<{$pageNavi->renderUrlForSort()}>&amp;sort=<{$smarty.const.NEWBLOCKS_SORT_KEY_BID}>"><img src="<{"icons/up.png"|theme}>" alt="<{$smarty.const._ASCENDING}>" title="<{$smarty.const._ASCENDING}>" /></a>
      <a href="<{$pageNavi->renderUrlForSort()}>&amp;sort=-<{$smarty.const.NEWBLOCKS_SORT_KEY_BID}>"><img src="<{"icons/down.png"|theme}>" alt="<{$smarty.const._DESCENDING}>" title="<{$smarty.const._DESCENDING}>" /></a>
    
      <{$smarty.const._AD_LEGACY_LANG_BLOCK_MOD}>
      <a href="<{$pageNavi->renderUrlForSort()}>&amp;sort=<{$smarty.const.NEWBLOCKS_SORT_KEY_MID}>"><img src="<{"icons/up.png"|theme}>" alt="<{$smarty.const._ASCENDING}>" title="<{$smarty.const._ASCENDING}>" /></a>
      <a href="<{$pageNavi->renderUrlForSort()}>&amp;sort=-<{$smarty.const.NEWBLOCKS_SORT_KEY_MID}>"><img src="<{"icons/down.png"|theme}>" alt="<{$smarty.const._DESCENDING}>" title="<{$smarty.const._DESCENDING}>" /></a>
    
      <{$smarty.const._AD_LEGACY_LANG_TITLE}>
      <a href="<{$pageNavi->renderUrlForSort()}>&amp;sort=<{$smarty.const.NEWBLOCKS_SORT_KEY_TITLE}>"><img src="<{"icons/up.png"|theme}>" alt="<{$smarty.const._ASCENDING}>" title="<{$smarty.const._ASCENDING}>" /></a>
      <a href="<{$pageNavi->renderUrlForSort()}>&amp;sort=-<{$smarty.const.NEWBLOCKS_SORT_KEY_TITLE}>"><img src="<{"icons/down.png"|theme}>" alt="<{$smarty.const._DESCENDING}>" title="<{$smarty.const._DESCENDING}>" /></a>
    
      <{$smarty.const._AD_LEGACY_LANG_SIDE}>
      <a href="<{$pageNavi->renderUrlForSort()}>&amp;sort=<{$smarty.const.NEWBLOCKS_SORT_KEY_SIDE}>"><img src="<{"icons/up.png"|theme}>" alt="<{$smarty.const._ASCENDING}>" title="<{$smarty.const._ASCENDING}>" /></a>
      <a href="<{$pageNavi->renderUrlForSort()}>&amp;sort=-<{$smarty.const.NEWBLOCKS_SORT_KEY_SIDE}>"><img src="<{"icons/down.png"|theme}>" alt="<{$smarty.const._DESCENDING}>" title="<{$smarty.const._DESCENDING}>" /></a>
  
      <{$smarty.const._AD_LEGACY_LANG_LCR}>
    
      <{$smarty.const._AD_LEGACY_LANG_WEIGHT}>
      <a href="<{$pageNavi->renderUrlForSort()}>&amp;sort=<{$smarty.const.NEWBLOCKS_SORT_KEY_WEIGHT}>"><img src="<{"icons/up.png"|theme}>" alt="<{$smarty.const._ASCENDING}>" title="<{$smarty.const._ASCENDING}>" /></a>
      <a href="<{$pageNavi->renderUrlForSort()}>&amp;sort=-<{$smarty.const.NEWBLOCKS_SORT_KEY_WEIGHT}>"><img src="<{"icons/down.png"|theme}>" alt="<{$smarty.const._DESCENDING}>" title="<{$smarty.const._DESCENDING}>" /></a>
    
      <{$smarty.const._AD_LEGACY_LANG_BCACHETIME}>
      <a href="<{$pageNavi->renderUrlForSort()}>&amp;sort=<{$smarty.const.NEWBLOCKS_SORT_KEY_BCACHETIME}>"><img src="<{"icons/up.png"|theme}>" alt="<{$smarty.const._ASCENDING}>" title="<{$smarty.const._ASCENDING}>" /></a>
      <a href="<{$pageNavi->renderUrlForSort()}>&amp;sort=-<{$smarty.const.NEWBLOCKS_SORT_KEY_BCACHETIME}>"><img src="<{"icons/down.png"|theme}>" alt="<{$smarty.const._DESCENDING}>" title="<{$smarty.const._DESCENDING}>" /></a>
    
      <{$smarty.const._AD_LEGACY_LANG_LAST_MODIFIED}>
      <a href="<{$pageNavi->renderUrlForSort()}>&amp;sort=<{$smarty.const.NEWBLOCKS_SORT_KEY_LAST_MODIFIED}>"><img src="<{"icons/up.png"|theme}>" alt="<{$smarty.const._ASCENDING}>" title="<{$smarty.const._ASCENDING}>" /></a>
      <a href="<{$pageNavi->renderUrlForSort()}>&amp;sort=-<{$smarty.const.NEWBLOCKS_SORT_KEY_LAST_MODIFIED}>"><img src="<{"icons/down.png"|theme}>" alt="<{$smarty.const._DESCENDING}>" title="<{$smarty.const._DESCENDING}>" /></a>
  
      <{$smarty.const._AD_LEGACY_LANG_UNINSTALL}><br />
    <input name="allbox" id="allbox" onclick="with(document.blockform){for(i=0;i<length;i++){if(elements[i].type=='checkbox'&&elements[i].disabled==false&&elements[i].name.indexOf('uninstall')>=0){elements[i].checked=this.checked;}}}" type="checkbox" value="Check All" />
  <{$smarty.const._AD_LEGACY_LANG_CONTROL}>
</section>




<form name="blockform" method="post" action="./index.php?action=BlockList">
  <{xoops_token form=$actionForm}>

<{* ---------- ---------- ---------- ---------- ---------- UI-GRID-BLOCKS *}>
<div class="ui-grid-blocks">


<{foreach item=obj from=$objects}>

	<div class="ui-card-block">

		<div class="ui-card-header">

      <div class="ui-card-info">
      <{strip}>
        <a href="#" title="<{$obj->getShow('bid')}>- 
            <{if $obj->mModule}>
            <{$obj->mModule->getVar('name')}>
            <{else}> 
              <{if $obj->get('c_type') == "H" }>
              <{$smarty.const._AD_LEGACY_LANG_CUSTOM_HTML}>
              <{elseif $obj->get('c_type') == "P"}><{$smarty.const._AD_LEGACY_LANG_CUSTOM_PHP}>
              <{elseif $obj->get('c_type') == "S"}><{$smarty.const._AD_LEGACY_LANG_CUSTOM_WITH_SMILIES}>
              <{elseif $obj->get('c_type') == "T"}><{$smarty.const._AD_LEGACY_LANG_CUSTOM_WITHOUT_SMILIES}>
              <{/if}>
            <{/if}>">
          <img class="svg" src="<{"icons/icon-info.svg"|theme}>" data-width="24px" data-height="24px">
        </a>
      <{/strip}>
      </div>
      
			<div class="ui-card-settings">

          <input type="checkbox" name="uninstall[<{$obj->get('bid')}>]" value="1">

        <{if $obj->get('block_type') == 'C'}>
          <a class="ui-block-edit" href="./index.php?action=CustomBlockEdit&amp;bid=<{$obj->getShow('bid')}>" title="<{$smarty.const._EDIT}>">
            <img src="<{"icons/icon-edit.svg"|theme}>" class="svg">
          </a>
        <{else}>
          <a class="ui-block-edit" href="./index.php?action=BlockEdit&amp;bid=<{$obj->getShow('bid')}>" title="<{$smarty.const._EDIT}>">
            <img src="<{"icons/icon-edit.svg"|theme}>" class="svg">
          </a>
        <{/if}>
        <a href="./index.php?action=BlockUninstall&amp;bid=<{$obj->getShow('bid')}>" title="<{$smarty.const._AD_LEGACY_LANG_UNINSTALL}>">
               <img src="<{"icons/icon-block-uninstall.svg"|theme}>" class="svg">
        </a>

      </div><{* /ui-card-settings *}>
      
		</div><{* /ui-card-header *}>


    <div class="ui-card-content">

      <div class="ui-card-image">  
      <{* Block [c_type] *}>

      <{if $obj->mModule}>
        <a class="ui-block-type" href="./index.php?action=CustomBlockEdit&amp;bid=<{$obj->getShow('bid')}>" title="<{$smarty.const._EDIT}>">
        <svg xmlns="http://www.w3.org/2000.svg" width="100%" height="100%" viewBox="0 0 240 100" class="ui-block-module">
          <g id="ui-block-module">
          <path class="block-icon" d="M12 17.56l4.07-1.13l.55-6.1H9.38L9.2 8.3h7.6l.2-1.99H7l.56 6.01h6.89l-.23 2.58l-2.22.6l-2.22-.6l-.14-1.66h-2l.29 3.19L12 17.56M4.07 3h15.86L18.5 19.2L12 21l-6.5-1.8L4.07 3z" fill="currentColor"></path>
          <text class="block-name" x="120px" y="50px" fill="currentColor">
          <tspan><![CDATA[<{$obj->mModule->getVar('name')}>]]></tspan>
          </text>
          </g>
        </svg>
      </a>
      <{else}>
        <a class="ui-block-type" href="./index.php?action=BlockEdit&amp;bid=<{$obj->getShow('bid')}>" title="<{$smarty.const._EDIT}>">
        <{if $obj->get('c_type') == "H" }>   
          <svg xmlns="http://www.w3.org/2000.svg" width="100%" height="100%" viewBox="0 0 240 100" class="ui-block-html">
            <g id="ui-block-html">
            <path class="block-icon" d="M12 17.56l4.07-1.13l.55-6.1H9.38L9.2 8.3h7.6l.2-1.99H7l.56 6.01h6.89l-.23 2.58l-2.22.6l-2.22-.6l-.14-1.66h-2l.29 3.19L12 17.56M4.07 3h15.86L18.5 19.2L12 21l-6.5-1.8L4.07 3z" fill="currentColor"></path>
            <text class="block-name" x="120px" y="50px" fill="currentColor">
            <tspan><![CDATA[<{$smarty.const._AD_LEGACY_LANG_CUSTOM_HTML}>]]></tspan>
            </text>
            </g>
          </svg>
        <{elseif $obj->get('c_type') == "P"}>
          <svg xmlns="http://www.w3.org/2000.svg" width="100%" height="100%" viewBox="0 0 240 100" class="ui-block-php">
            <g id="ui-block-php">
            <path class="block-icon" d="M12 17.56l4.07-1.13l.55-6.1H9.38L9.2 8.3h7.6l.2-1.99H7l.56 6.01h6.89l-.23 2.58l-2.22.6l-2.22-.6l-.14-1.66h-2l.29 3.19L12 17.56M4.07 3h15.86L18.5 19.2L12 21l-6.5-1.8L4.07 3z" fill="currentColor"></path>
            <text class="block-name" x="120px" y="50px" fill="currentColor">
            <tspan><![CDATA[<{$smarty.const._AD_LEGACY_LANG_CUSTOM_PHP}>]]></tspan>
            </text>
            </g>
          </svg>
        <{elseif $obj->get('c_type') == "S"}>
          <svg xmlns="http://www.w3.org/2000.svg" width="100%" height="100%" viewBox="0 0 240 100" class="ui-block-smilies">
            <g id="ui-block-smilies">
            <path class="block-icon" d="M12 17.56l4.07-1.13l.55-6.1H9.38L9.2 8.3h7.6l.2-1.99H7l.56 6.01h6.89l-.23 2.58l-2.22.6l-2.22-.6l-.14-1.66h-2l.29 3.19L12 17.56M4.07 3h15.86L18.5 19.2L12 21l-6.5-1.8L4.07 3z" fill="currentColor"></path>
            <text class="block-name" x="120px" y="50px" fill="currentColor">
            <tspan><![CDATA[<{$smarty.const._AD_LEGACY_LANG_CUSTOM_WITH_SMILIES}>]]></tspan>
            </text>
            </g>
          </svg>
        <{elseif $obj->get('c_type') == "T"}>
          <svg xmlns="http://www.w3.org/2000.svg" width="100%" height="100%" viewBox="0 0 240 100" class="ui-block-no-smilies">
            <g id="ui-block-no-smilies">
            <path class="block-icon" d="M12 17.56l4.07-1.13l.55-6.1H9.38L9.2 8.3h7.6l.2-1.99H7l.56 6.01h6.89l-.23 2.58l-2.22.6l-2.22-.6l-.14-1.66h-2l.29 3.19L12 17.56M4.07 3h15.86L18.5 19.2L12 21l-6.5-1.8L4.07 3z" fill="currentColor"></path>
            <text class="block-name" x="120px" y="50px" fill="currentColor">
            <tspan><![CDATA[<{$smarty.const._AD_LEGACY_LANG_CUSTOM_WITHOUT_SMILIES}>]]></tspan>
            </text>
            </g>
          </svg>
        <{/if}>
        </a>
      <{/if}>
    </div><{* /Block [c_type] *}>

    <div class="ui-block-info">

      <div class="ui-block-name">
  
        <input type="text" size="1" maxlength="4" name="weight[<{$obj->get('bid')}>]" value="<{$obj->get('weight','e')}>" title="<{$smarty.const._AD_LEGACY_LANG_WEIGHT}>">
      
        <input type="text" size="20" maxlength="255" name="title[<{$obj->get('bid')}>]" value="<{$obj->get('title')}>" title="<{$smarty.const._AD_LEGACY_LANG_TITLE}>">

      </div>
  

      <div class="ui-block-side">
          <{strip}>
          <{if $obj->get('side') == 0}>
          <div class="ui-block-input active">
          <{xoops_input type=radio name=side key=$obj->get('bid') value=0 default=$obj->get('side')}>
          </div>
          <{else}>
            <div class="ui-block-input inactive">
            <{xoops_input type=radio name=side key=$obj->get('bid') value=0 default=$obj->get('side')}>
            </div>
          <{/if}>

          <div class="ui-block-separator">-</div>
          
          <{if $obj->get('side') == 3}>
            <div class="ui-block-input active"><{xoops_input type=radio name=side key=$obj->get('bid') value=3 default=$obj->get('side')}></div>
          <{else}>
            <div class="ui-block-input inactive"><{xoops_input type=radio name=side key=$obj->get('bid') value=3 default=$obj->get('side')}></div>
          <{/if}>
          
          <{if $obj->get('side') == 5}>
            <div class="ui-block-input active"><{xoops_input type=radio name=side key=$obj->get('bid') value=5 default=$obj->get('side')}></div>
          <{else}>
            <div class="ui-block-input inactive"><{xoops_input type=radio name=side key=$obj->get('bid') value=5 default=$obj->get('side')}></div>
          <{/if}>
          
          <{if $obj->get('side') == 4}>
            <div class="ui-block-input active"><{xoops_input type=radio name=side key=$obj->get('bid') value=4 default=$obj->get('side')}></div>
          <{else}>
            <div class="ui-block-input inactive"><{xoops_input type=radio name=side key=$obj->get('bid') value=4 default=$obj->get('side')}></div>
          <{/if}>
          
          <div class="ui-block-separator">-</div>
          
          <{if $obj->get('side') == 1}>
            <div class="ui-block-input active"><{xoops_input type=radio name=side key=$obj->get('bid') value=1 default=$obj->get('side')}></div>
          <{else}>
            <div class="ui-block-input inactive"><{xoops_input type=radio name=side key=$obj->get('bid') value=1 default=$obj->get('side')}></div>
          <{/if}>
        
          <{/strip}>
					</div><{* ui-block-side *}>

          <div class="ui-block-cache">
            <select name="bcachetime[<{$obj->getShow('bid')}>]">
              <{assign var="bid" value=$obj->getShow('bid') }>
              <{xoops_optionsArray id="bcachetime[`$bid`]" from=$cachetimeArr value=cachetime label=label default=$obj->get('bcachetime')}>
            </select>
          </div>

          <div class="ui-block-date">
              <img class="svg" src="<{"icons/icon-date-time.svg"|theme}>">
              <{$obj->getShow('last_modified')|xoops_formattimestamp:l}>
            </div>

          </div><{* /ui-block-info *}>
          
        </div><{* /ui-card-content *}>

	</div><{* ui-card-block *}>

  <{/foreach}>


</div><{* ui-grid-blocks *}>

  <div class="foot">
    <input type="submit" value="<{$smarty.const._SUBMIT}>" class="formButton">
  </div>

</form>

<div class="pagenavi"><{xoops_pagenavi pagenavi=$pageNavi}></div>
